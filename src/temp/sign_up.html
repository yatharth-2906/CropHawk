<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="icon" href="assets/icon/icons8-drone-line512-96.png">
    <script src="https://kit.fontawesome.com/c32adfdcda.js" crossorigin="anonymous"></script>
    <title>Crop Hawk</title>
</head>

<body class="login_body">
    <main class="login_main">
        <div class="form_container">
            <form id="login_form">
                <h1 class="form_heading">Sign Up To CropHawk</h1>
                <p class="form_para">Sign Up to join our community</p>
                <button class="google_btn btn_transition" type="submit"><img class="btn_icon" src="assets/google_icon_1.png">  Sign Up With Google</button>

                <div>
                    <p class="form_para">--------------------or--------------------</p>
                </div>

                <div class="inputt_container">
                    <input class="inputt" type="text" required="true" placeholder="Name" name="name" id="fname">
                </div>

                <br>
                <div class="inputt_container">
                    <input class="inputt" type="email" required="true"placeholder="Email ID" name="email" id="femail">
                </div>

                <br>
                <div class="inputt_container">
                    <input class="inputt" type="password" required="true"placeholder="Password" name="password" id="fpassword">
                </div>

                <br>
                <div class="checkbox_container">
                    <input type="checkbox" required="true">
                    <p class="checkbox_para">By Signing Up, you agree to our Terms & Conditions.</p>
                </div>
                
                <br>
                <button class="sign_up_btn btn_transition" type="submit">Sign Up</button>

                <br>
                <p class="form_para_2">Already a Member? <a style="color: rgb(92, 92, 183);" href="login.html">Login</a></p>
            </form>
        </div>

        <div class="login_img">
        </div>
    </main>

    <script src="https://web3forms.com/client/script.js" async defer></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
        import { getDatabase, set, ref } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-database.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-auth.js";

        const firebaseConfig = {
          apiKey: "AIzaSyBruz7vqar_eojDg-OK4XoPSCkTQ5qQlb0",
          authDomain: "crophawk-f0913.firebaseapp.com",
          projectId: "crophawk-f0913",
          storageBucket: "crophawk-f0913.appspot.com",
          messagingSenderId: "525825726834",
          appId: "1:525825726834:web:c477a0aa352061eea8a5eb"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getDatabase();
        const auth = getAuth(app);

        let email_input = document.getElementById('femail');
        let name_input = document.getElementById('fname');
        let password_input = document.getElementById('fpassword');
        let main_form = document.getElementById('login_form');

        let RegisterUser = evt =>{
            evt.preventDefault();

            createUserWithEmailAndPassword(auth, email_input.value, password_input.value).then(credentials => {
                console.log(credentials);
                localStorage.setItem("credentials", JSON.stringify(credentials));
                window.location.assign('index.html');
            }).catch((error) => {
                alert(error);
                const errorCode = error.code;
                const errorMessage = error.message;
            });
        }

        main_form.addEventListener('submit', RegisterUser);
      </script>
</body>
</html>